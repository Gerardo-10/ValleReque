{% extends './base.html' %}

{% block title %}Valle Reque{% endblock %}

{% block customCSS %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/global.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/sidebar.css') }}">
{% endblock %}

{% block body %}
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <a href="{{ url_for('home_routes.sidebar') }}"><img
                            src="{{ url_for('static', filename='img/logo_principal_simplificado.png') }}"
                            alt="Logo Valle Reque"
                            class="logo-img"></a>
                    <span class="text-blue">Valle <span class="text-green">Reque</span></span>
                </div>
                <button class="menu-toggle" id="menuToggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-section {% if rol != 'Administrador' %}d-none{% endif %}">
                    <a href="#" class="nav-item" id="seguridad-link">
                        <i class="fas fa-shield-alt"></i>
                        <span>Seguridad</span>
                    </a>
                </div>


                <div class="nav-section">
                    <a href="#" class="nav-item">
                        <i class="fas fa-truck"></i>
                        <span>Logística</span>
                    </a>
                    <div class="nav-submenu">
                        <a href="#" class="nav-subitem">
                            <i class="fas fa-folder"></i>
                            <span>Proyectos</span>
                        </a>
                        <a href="#" class="nav-subitem" id="terrenos-link">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>Terrenos</span>
                        </a>
                        <a href="#" class="nav-subitem" id="clientes-link">
                            <i class="fas fa-shield-alt"></i>
                            <span>Clientes</span>
                        </a>
                    </div>
                </div>

                <div class="nav-section">
                    <a href="#" class="nav-item">
                        <i class="fas fa-coins"></i>
                        <span>Tesorería</span>
                    </a>
                    <div class="nav-submenu">
                        <a href="#" class="nav-subitem">
                            <i class="fas fa-receipt"></i>
                            <span>Cuotas de Pago</span>
                        </a>
                        <a href="#" class="nav-subitem">
                            <i class="fas fa-money-bill-wave"></i>
                            <span>Financiamientos</span>
                        </a>
                        <a href="#" class="nav-subitem">
                            <i class="fas fa-university"></i>
                            <span>Bancos</span>
                        </a>
                        <a href="#" class="nav-subitem">
                            <i class="fas fa-exchange-alt"></i>
                            <span>Devoluciones</span>
                        </a>
                    </div>
                </div>

                <div class="nav-section">
                    <a href="#" class="nav-item">
                        <i class="fas fa-file-invoice-dollar"></i>
                        <span>Cotización</span>
                    </a>
                </div>

                <div class="nav-section">
                    <a href="#" class="nav-item">
                        <i class="fas fa-shopping-cart"></i>
                        <span>Ventas</span>
                    </a>
                </div>

                <div class="nav-section">
                    <a href="#" class="nav-item">
                        <i class="fas fa-list"></i>
                        <span>Listar</span>
                    </a>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="top-header">
                <div class="header-left">
                    <button class="menu-toggle-mobile" id="menuToggleMobile">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>

                <div class="header-right">
                    <div class="search-box">
                        <label for="search"><i class="fas fa-search"></i></label>
                        <input id="search" name="search" type="text" placeholder="Buscar...">
                    </div>

                    <div class="notifications">
                        <button class="icon-btn">
                            <i class="far fa-bell"></i>
                            <span class="badge">3</span>
                        </button>
                    </div>

                    <div class="user-profile" id="userProfile">
                        <div class="user-info">
                            <span class="user-name">{{ current_user.username }}</span>
                        </div>
                        <img src="{{ url_for('static', filename='img/perfil.png') }}" alt="Usuario" class="avatar">

                        <!-- User Dropdown Menu -->
                        <div class="user-dropdown" id="userDropdown">
                            <div class="dropdown-header">
                                <img src="{{ url_for('static', filename='img/perfil.png') }}" alt="Usuario"
                                     class="avatar-large">
                                <div class="user-details">
                                    <h4>{{ current_user.username }}</h4>
                                    <p>{{ rol }}</p>
                                </div>
                            </div>
                            <div class="dropdown-body">
                                <a href="#" class="dropdown-item" id="perfil-link">
                                    <i class="fas fa-user"></i>
                                    <span>Mi Perfil</span>
                                </a>
                                <a href="#" class="dropdown-item">
                                    <i class="fas fa-cog"></i>
                                    <span>Configuración</span>
                                </a>
                                <a class="dropdown-item" href="{{ url_for('auth_routes.logout') }}">
                                    <i class="fas fa-sign-out-alt"></i>
                                    <span>Cerrar Sesión</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <div class="content-wrapper" id="dynamic-content">
                <div class="welcome-card">
                    <div class="welcome-content">
                        <h2>Bienvenido al Sistema Valle Reque</h2>
                        <p>Seleccione una opción del menú para comenzar</p>
                    </div>
                    <div class="welcome-image">
                        <img src="{{ url_for('static', filename='img/logo_principal_simplificado.png') }}"
                             alt="Valle Reque" class="welcome-logo">
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="card-content">
                            <h3>Clientes</h3>
                            <p class="card-value">248</p>
                            <p class="card-change positive">+12% <span>este mes</span></p>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-icon">
                            <i class="fas fa-file-invoice-dollar"></i>
                        </div>
                        <div class="card-content">
                            <h3>Ventas</h3>
                            <p class="card-value">S/ 125,400</p>
                            <p class="card-change positive">+8% <span>este mes</span></p>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div class="card-content">
                            <h3>Terrenos</h3>
                            <p class="card-value">56</p>
                            <p class="card-change negative">-3% <span>disponibles</span></p>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-icon">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="card-content">
                            <h3>Financiamientos</h3>
                            <p class="card-value">32</p>
                            <p class="card-change positive">+5% <span>este mes</span></p>
                        </div>
                    </div>
                </div>

                <div class="recent-activity">
                    <div class="section-header">
                        <h2>Actividad Reciente</h2>
                        <button class="btn-text">Ver todo</button>
                    </div>

                    <div class="activity-list">
                        <div class="activity-item">
                            <div class="activity-icon">
                                <i class="fas fa-user-plus"></i>
                            </div>
                            <div class="activity-content">
                                <p class="activity-text">Nuevo cliente registrado: <strong>María Rodríguez</strong></p>
                                <p class="activity-time">Hace 2 horas</p>
                            </div>
                        </div>

                        <div class="activity-item">
                            <div class="activity-icon">
                                <i class="fas fa-file-signature"></i>
                            </div>
                            <div class="activity-content">
                                <p class="activity-text">Contrato firmado: <strong>Terreno A-042</strong></p>
                                <p class="activity-time">Hace 5 horas</p>
                            </div>
                        </div>

                        <div class="activity-item">
                            <div class="activity-icon">
                                <i class="fas fa-money-check"></i>
                            </div>
                            <div class="activity-content">
                                <p class="activity-text">Pago recibido: <strong>S/ 12,500</strong> de <strong>Juan
                                    Pérez</strong></p>
                                <p class="activity-time">Hace 1 día</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="../static/js/sidebar.js"></script>
    <script src="../static/js/seguridad.js"></script>
    <script src="../static/js/detalle_empleado.js"></script>
    <script src="../static/js/clientes.js"></script>
    <script src="../static/js/detalle_clientes.js"></script>
    <script src="../static/js/perfil.js"></script>
    <script src="../static/js/terrenos.js"></script>
{% endblock %}